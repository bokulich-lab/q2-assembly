{% extends 'base.html' %}

{% block head %}
<title>Embedding Vega-Lite</title>
<script src="https://cdn.jsdelivr.net/npm//vega@5" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/npm//vega-lite@5.16.3" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/npm//vega-embed@6" type="text/javascript"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha256-YvdLHPgkqJ8DVUxjjnGVlMMJtNimJ6dYkowFFvp4kKs=" rel="stylesheet"/>
{% endblock %}

{% block content %}

  <div class="row">
    <div class="col-lg-12">
      <h3>QC</h3>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-12">
      <div id="plot"></div>
    </div>
  </div>



  <script id="vega_json" type="application/json">
      {{
          vega_json
          |
          safe
      }}
  </script>

  <script type="text/javascript">
      $(document).ready(function () {
        const vegaSpec = JSON.parse(document.getElementById('vega_json').textContent);
        vegaEmbed("#plot", vegaSpec).then(
            function (result) {
                result.view.logLevel(vega.Warn);
                window.v = result.view;
            }
        ).catch(
            function (error) {
                handleErrors([error], $("#plot"));
            }
        );
    });
  </script>

{% endblock %}

{% block footer %}
{% set loading_selector = '#loading' %}
{% include 'js-error-handler.html' %}
{% endblock %}
