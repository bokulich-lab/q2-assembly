{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "params": [
    {"name": "category_param", "value": "group"},
    {"name": "value_param", "value": "All"}
  ],
  "description": "Cumulative contig length curves",
  "data": {"values": {{ cumulative_df | safe }}},
  "transform": [{"filter": "value_param == 'All' || datum[category_param] == value_param"}],
  "mark": {"type": "line", "point": true},
  "width": "container", "height": 350,
  "selection": {
    "sample_select": {
      "type": "multi",
      "fields": ["sample"],
      "bind": "legend"
    },
    "grid": {"type": "interval", "bind": "scales"}
  },
  "encoding": {
    "x": {"field": "rank", "type": "quantitative", "title": "No. of contigs"},
    "y": {"field": "cumulative_length", "type": "quantitative", "title": "Cumulative length (bp)", "axis":  {"format": "~s"}},
    "color": {"field": "sample", "type": "nominal", "scale": {"scheme": "viridis"}, "legend":  {"title":  "Sample"}},
    "opacity": {
      "condition": {"param": "sample_select", "value": 1},
      "value": 0.2
    }
  },
  "config": {
    "background": "#fff",
    "font": "Open Sans, Arial, sans-serif",
    "axis": {
      "grid": true,
      "gridColor": "#eaeaea",
      "gridWidth": 1,
      "tickColor": "#888",
      "labelFont": "Open Sans, Arial, sans-serif",
      "labelFontSize": 14,
      "titleFont": "Open Sans, Arial, sans-serif",
      "titleFontSize": 16,
      "titleFontWeight": "bold",
      "domain": false
    },
    "legend": {
      "orient": "top",
      "columns":5,
      "title": "Sample",
      "offset": 50,
      "labelFont": "Open Sans, Arial, sans-serif",
      "labelFontSize": 14,
      "titleFont": "Open Sans, Arial, sans-serif",
      "titleFontSize": 15,
      "symbolType": "circle",
      "symbolSize": 120,
      "symbolLimit": 100
    },
    "view": {
      "stroke": "#eaeaea",
      "strokeWidth": 1
    },
    "title": {
      "font": "Open Sans, Arial, sans-serif",
      "fontSize": 18,
      "fontWeight": "bold",
      "anchor": "middle",
      "color": "#222"
    }
  },
  "title": "Cumulative contig length"
} 